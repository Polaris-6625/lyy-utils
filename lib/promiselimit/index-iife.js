var promiselimit=function(n){"use strict";return n.promiselimit=function(n){let t=0,i=[];function e(){if(i.length>0&&t<n){const n=i.shift();t++,n().finally((()=>{t--,e()})),e()}}return function(n){return new Promise(((t,r)=>{i.push((()=>new Promise(((i,e)=>{n().then((n=>{i(n),t(n)})).catch((n=>{e(n),r(n)}))})))),e()}))}},n}({});
